<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Lumon - History</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='page_style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
html, body {
  height: 100dvh;
  width: 100dvw;
  min-height: 100dvh;
  min-width: 100dvw;
  margin: 0;
  padding: 0;
  overflow: hidden !important;
  box-sizing: border-box;
  overscroll-behavior: none;
  background: #000 !important;
  font-family: 'Inter', Arial, sans-serif;
}
.page-container {
  height: 100dvh;
  width: 100dvw;
  min-height: 100dvh;
  min-width: 100dvw;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  position: relative;
  overflow: hidden;
}
.history-header {
  width: 100vw;
  max-width: 420px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  padding: 24px 0 8px 0;
  position: relative;
  gap: 6px;
}
.history-title {
  font-size: 1.15rem;
  color: #fff;
  font-weight: 700;
  letter-spacing: 0.01em;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}
.animated-glow {
  animation: glow 2s infinite alternate, floaty 4s ease-in-out infinite;
}
@keyframes glow {
  0% { text-shadow: 0 0 8px #10b981, 0 0 2px #fff; }
  100% { text-shadow: 0 0 24px #10b981, 0 0 8px #fff; }
}
@keyframes floaty {
  0% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
  100% { transform: translateY(0); }
}
.animated-history-text {
  display: inline-block;
  font-family: 'Inter', Arial, sans-serif;
  font-size: 1.15rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  color: #fff;
}
.history-title i {
  margin-right: 7px;
  color: #10b981;
  font-size: 1em;
}

        .delete-history-btn {
            background: none;
            border: none;
            color: #fff;
            font-size: 1.3em;
            cursor: pointer;
            transition: color 0.2s;
            position: absolute;
            right: 24px;
            top: 36px;
        }
        .delete-history-btn:hover {
            color: #ff6b6b;
        }
        .history-list {
            width: 100vw;
            max-width: 420px;
            padding: 0 24px 24px 24px;
            margin-top: 8px;
            display: flex;
            flex-direction: column;
            gap: 18px;
        }
        .history-item {
            background: rgba(16,185,129,0.09);
            border-radius: 14px;
            padding: 16px 18px;
            color: #fff;
            font-size: 1.08rem;
            box-shadow: 0 2px 10px #005e3c22;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .history-empty {
            color: #aaa;
            font-size: 1.08rem;
            text-align: center;
            margin-top: 56px;
        }
        /* Leaf/floating animation */
        .floating-elements-3d {
            position: absolute;
            top: 0; left: 0; width: 100vw; height: 100vh;
            pointer-events: none;
            z-index: 0;
        }
    </style>
</head>
<body>
    <div class="page-container">
        <div class="floating-elements-3d"></div>
        <div class="history-header" style="flex-direction:column;align-items:center;justify-content:flex-start;padding:24px 0 8px 0;gap:6px;">
  <button class="back-btn" onclick="navigateToApp()" style="margin-bottom:8px;align-self:flex-start;margin-left:18px;">
    <span style="display:inline-block;width:36px;height:36px;background:#10b981;border-radius:50%;box-shadow:0 2px 8px #10b98144;display:flex;align-items:center;justify-content:center;border:none;outline:none;cursor:pointer;">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M15 18l-6-6 6-6" stroke="#fff" stroke-width="2.3" stroke-linecap="round" stroke-linejoin="round"/></svg>
    </span>
  </button>
  <div class="history-title animated-glow" style="font-size:1.45rem;align-items:center;justify-content:center;gap:8px;">
    <i class="fas fa-history" style="font-size:1.25em;margin-right:8px;"></i>
    <span class="animated-history-text" style="font-size:1.45rem;">History</span>
  </div>
  <button class="delete-history-btn" title="Delete All History" onclick="deleteHistory()" style="position:absolute;top:18px;right:24px;">
    <i class="fas fa-trash"></i>
  </button>
</div>
<script>
function navigateToApp() {
  window.location.href = '/app';
}
</script>
        <div class="history-list" id="history-list">
            <!-- History items will be injected here -->
        </div>
        <div class="history-empty" id="history-empty" style="display:none;">
            No history found.
        </div>
    </div>
    <script src="{{ url_for('static', filename='page_animations.js') }}"></script>
    <script>
// Dummy data for demo; replace with actual user history fetch
const userHistory = JSON.parse(localStorage.getItem('lumon_history') || '[]');
const historyList = document.getElementById('history-list');
const historyEmpty = document.getElementById('history-empty');

function renderHistory() {
    historyList.innerHTML = '';
    if (!userHistory.length) {
        historyEmpty.style.display = 'block';
        return;
    }
    historyEmpty.style.display = 'none';
    userHistory.forEach((item, idx) => {
        const el = document.createElement('div');
        el.className = 'history-item';
        el.innerHTML = `<span>${item}</span>`;
        historyList.appendChild(el);
    });
}

function deleteHistory() {
    // Show confirmation modal
    showDeleteModal();
}

function confirmDeleteHistory() {
    localStorage.removeItem('lumon_history');
    userHistory.length = 0;
    renderHistory();
    closeDeleteModal();
}

function showDeleteModal() {
    let modal = document.getElementById('lumon-delete-modal');
    if (!modal) {
        modal = document.createElement('div');
        modal.id = 'lumon-delete-modal';
        modal.innerHTML = `
        <div class="lumon-modal-backdrop"></div>
        <div class="lumon-modal-box">
            <div class="lumon-modal-title">Confirm Delete</div>
            <div class="lumon-modal-content">Are you sure you want to delete all your history? This action cannot be undone.</div>
            <div class="lumon-modal-actions">
                <button class="lumon-modal-btn cancel" onclick="closeDeleteModal()">Cancel</button>
                <button class="lumon-modal-btn confirm" onclick="confirmDeleteHistory()">Delete</button>
            </div>
        </div>
        `;
        document.body.appendChild(modal);
    } else {
        modal.style.display = 'block';
    }
}
function closeDeleteModal() {
    let modal = document.getElementById('lumon-delete-modal');
    if (modal) modal.style.display = 'none';
}

renderHistory();
    </script>
</body>
</html>
